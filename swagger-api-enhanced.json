{
  "openapi": "3.0.0",
  "info": {
    "title": "Cocktail Ordering System API",
    "version": "1.0.0",
    "description": "A complete backend API for a cocktail ordering system with Express.js, Node.js, and MongoDB. Features JWT authentication, Paystack payment integration, and comprehensive admin management.",
    "contact": {
      "name": "Clyp AI",
      "email": "support@example.com"
    },
    "license": {
      "name": "MIT",
      "url": "https://opensource.org/licenses/MIT"
    }
  },
  "servers": [
    {
      "url": "http://localhost:3000",
      "description": "Development server"
    }
  ],
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "description": "Enter your JWT token in the format: Bearer <token>"
      }
    },
    "schemas": {
      "Error": {
        "type": "object",
        "properties": {
          "error": {
            "type": "string",
            "description": "Error type"
          },
          "message": {
            "type": "string",
            "description": "Error message"
          },
          "details": {
            "type": "array",
            "items": {
              "type": "object"
            },
            "description": "Validation error details"
          }
        }
      },
      "Success": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "description": "Success status"
          },
          "message": {
            "type": "string",
            "description": "Success message"
          }
        }
      },
      "Pagination": {
        "type": "object",
        "properties": {
          "page": {
            "type": "integer",
            "description": "Current page number"
          },
          "limit": {
            "type": "integer",
            "description": "Items per page"
          },
          "total": {
            "type": "integer",
            "description": "Total number of items"
          },
          "pages": {
            "type": "integer",
            "description": "Total number of pages"
          }
        }
      },
      "User": {
        "type": "object",
        "required": ["email", "password"],
        "properties": {
          "_id": {
            "type": "string",
            "description": "User ID"
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "User email address"
          },
          "role": {
            "type": "string",
            "enum": ["admin", "user"],
            "description": "User role",
            "default": "admin"
          },
          "isEmailVerified": {
            "type": "boolean",
            "description": "Email verification status",
            "default": false
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "User creation timestamp"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time",
            "description": "User last update timestamp"
          }
        }
      },
      "Cocktail": {
        "type": "object",
        "required": ["name", "description", "price", "availableStates"],
        "properties": {
          "_id": {
            "type": "string",
            "description": "Cocktail ID"
          },
          "name": {
            "type": "string",
            "description": "Cocktail name",
            "example": "Nigerian Sunset"
          },
          "description": {
            "type": "string",
            "description": "Cocktail description",
            "example": "A tropical blend of palm wine, pineapple juice, and ginger"
          },
          "price": {
            "type": "number",
            "description": "Price in NGN (Nigerian Naira)",
            "minimum": 0,
            "example": 2500
          },
          "availableStates": {
            "type": "array",
            "items": {
              "type": "string",
              "enum": [
                "Lagos", "FCT", "Rivers", "Delta", "Akwa Ibom", "Cross River",
                "Ogun", "Ondo", "Osun", "Oyo", "Kaduna", "Kano", "Plateau",
                "Katsina", "Jigawa", "Bauchi", "Bayelsa", "Anambra", "Imo",
                "Abia", "Niger", "Enugu", "Ebonyi", "Gombe", "Adamawa",
                "Taraba", "Zamfara", "Edo", "Benue", "Kebbi", "Sokoto",
                "Kwara", "Nasarawa", "Kogi"
              ]
            },
            "description": "Nigerian states where this cocktail is available",
            "example": ["Lagos", "FCT", "Rivers"]
          },
          "image": {
            "type": "object",
            "properties": {
              "public_id": {
                "type": "string",
                "description": "Cloudinary public ID"
              },
              "url": {
                "type": "string",
                "format": "uri",
                "description": "Image URL"
              }
            },
            "description": "Cocktail image information"
          },
          "isActive": {
            "type": "boolean",
            "description": "Whether the cocktail is available for ordering",
            "default": true
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "Cocktail creation timestamp"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time",
            "description": "Cocktail last update timestamp"
          }
        }
      },
      "OrderItem": {
        "type": "object",
        "required": ["cocktail", "quantity", "price"],
        "properties": {
          "cocktail": {
            "type": "string",
            "description": "Cocktail ID"
          },
          "quantity": {
            "type": "integer",
            "minimum": 1,
            "description": "Quantity ordered",
            "example": 2
          },
          "price": {
            "type": "number",
            "minimum": 0,
            "description": "Price per unit at time of order",
            "example": 2500
          }
        }
      },
      "Order": {
        "type": "object",
        "required": ["customer", "items", "idempotencyKey"],
        "properties": {
          "_id": {
            "type": "string",
            "description": "Order ID"
          },
          "orderNumber": {
            "type": "string",
            "description": "Unique order number",
            "example": "ORD-000001"
          },
          "idempotencyKey": {
            "type": "string",
            "description": "Unique key to prevent duplicate orders",
            "example": "unique-key-123"
          },
          "customer": {
            "type": "object",
            "required": ["name", "phone", "address", "state"],
            "properties": {
              "name": {
                "type": "string",
                "description": "Customer name",
                "example": "John Doe"
              },
              "phone": {
                "type": "string",
                "description": "Customer phone number",
                "example": "+2348012345678"
              },
              "address": {
                "type": "string",
                "description": "Delivery address",
                "example": "123 Victoria Island, Lagos"
              },
              "state": {
                "type": "string",
                "enum": [
                  "Lagos", "FCT", "Rivers", "Delta", "Akwa Ibom", "Cross River",
                  "Ogun", "Ondo", "Osun", "Oyo", "Kaduna", "Kano", "Plateau",
                  "Katsina", "Jigawa", "Bauchi", "Bayelsa", "Anambra", "Imo",
                  "Abia", "Niger", "Enugu", "Ebonyi", "Gombe", "Adamawa",
                  "Taraba", "Zamfara", "Edo", "Benue", "Kebbi", "Sokoto",
                  "Kwara", "Nasarawa", "Kogi"
                ],
                "description": "Delivery state",
                "example": "Lagos"
              },
              "email": {
                "type": "string",
                "format": "email",
                "description": "Customer email (optional)",
                "example": "customer@example.com"
              }
            }
          },
          "items": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/OrderItem"
            },
            "description": "Order items"
          },
          "totalAmount": {
            "type": "number",
            "minimum": 0,
            "description": "Total order amount in NGN",
            "example": 5000
          },
          "paymentStatus": {
            "type": "string",
            "enum": ["pending", "paid", "failed", "refunded"],
            "description": "Payment status",
            "default": "pending"
          },
          "fulfillmentStatus": {
            "type": "string",
            "enum": ["new", "preparing", "in_route", "delivered", "cancelled"],
            "description": "Order fulfillment status",
            "default": "new"
          },
          "adminNotes": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "note": {
                  "type": "string",
                  "description": "Admin note content"
                },
                "addedBy": {
                  "type": "string",
                  "description": "Admin who added the note"
                },
                "addedAt": {
                  "type": "string",
                  "format": "date-time",
                  "description": "When the note was added"
                }
              }
            },
            "description": "Admin notes for the order"
          },
          "estimatedDeliveryTime": {
            "type": "string",
            "format": "date-time",
            "description": "Estimated delivery time"
          },
          "notes": {
            "type": "string",
            "description": "Customer notes for the order",
            "example": "Please call before delivery"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "Order creation timestamp"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time",
            "description": "Order last update timestamp"
          }
        }
      },
      "Payment": {
        "type": "object",
        "required": ["order", "amount", "currency"],
        "properties": {
          "_id": {
            "type": "string",
            "description": "Payment ID"
          },
          "order": {
            "type": "string",
            "description": "Order ID"
          },
          "amount": {
            "type": "number",
            "minimum": 0,
            "description": "Payment amount in kobo (Nigerian currency subunit)",
            "example": 500000
          },
          "currency": {
            "type": "string",
            "enum": ["NGN"],
            "description": "Payment currency",
            "default": "NGN"
          },
          "status": {
            "type": "string",
            "enum": ["pending", "success", "failed", "cancelled"],
            "description": "Payment status",
            "default": "pending"
          },
          "paystackReference": {
            "type": "string",
            "description": "Paystack transaction reference",
            "example": "T1234567890"
          },
          "paystackAccessCode": {
            "type": "string",
            "description": "Paystack access code for payment"
          },
          "paystackUrl": {
            "type": "string",
            "format": "uri",
            "description": "Paystack payment URL"
          },
          "metadata": {
            "type": "object",
            "description": "Additional payment metadata"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "Payment creation timestamp"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time",
            "description": "Payment last update timestamp"
          }
        }
      },
      "OTP": {
        "type": "object",
        "required": ["email", "otp", "purpose"],
        "properties": {
          "_id": {
            "type": "string",
            "description": "OTP ID"
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "Email address for OTP",
            "example": "user@example.com"
          },
          "otp": {
            "type": "string",
            "description": "One-time password",
            "example": "123456"
          },
          "purpose": {
            "type": "string",
            "enum": ["email_verification", "password_reset", "admin_registration"],
            "description": "Purpose of the OTP",
            "default": "email_verification"
          },
          "isUsed": {
            "type": "boolean",
            "description": "Whether the OTP has been used",
            "default": false
          },
          "expiresAt": {
            "type": "string",
            "format": "date-time",
            "description": "OTP expiration time"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "OTP creation timestamp"
          }
        }
      },
      "InventoryItem": {
        "type": "object",
        "required": ["cocktail", "currentStock", "unit"],
        "properties": {
          "_id": {
            "type": "string",
            "description": "Inventory item ID"
          },
          "cocktail": {
            "type": "string",
            "description": "Associated cocktail ID"
          },
          "currentStock": {
            "type": "integer",
            "minimum": 0,
            "description": "Current quantity in stock",
            "example": 25
          },
          "unit": {
            "type": "string",
            "description": "Unit of measurement",
            "example": "bottles",
            "default": "units"
          },
          "minimumStock": {
            "type": "integer",
            "minimum": 0,
            "description": "Minimum stock level before low stock alert",
            "example": 10,
            "default": 5
          },
          "maximumStock": {
            "type": "integer",
            "minimum": 0,
            "description": "Maximum stock level for this item",
            "example": 100,
            "default": 50
          },
          "costPerUnit": {
            "type": "number",
            "minimum": 0,
            "description": "Cost per unit in NGN",
            "example": 1500,
            "default": 0
          },
          "supplier": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string",
                "description": "Supplier name",
                "example": "Premium Spirits Ltd."
              },
              "contact": {
                "type": "object",
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email",
                    "description": "Supplier email",
                    "example": "contact@premiumspirits.com"
                  },
                  "phone": {
                    "type": "string",
                    "description": "Supplier phone",
                    "example": "+2348011223344"
                  }
                }
              }
            },
            "description": "Supplier information"
          },
          "lastRestockDate": {
            "type": "string",
            "format": "date-time",
            "description": "Date of last restock"
          },
          "restockHistory": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "quantity": {
                  "type": "integer",
                  "description": "Quantity restocked"
                },
                "date": {
                  "type": "string",
                  "format": "date-time",
                  "description": "Restock date"
                },
                "cost": {
                  "type": "number",
                  "description": "Total cost of restock"
                },
                "restockedBy": {
                  "type": "string",
                  "description": "Admin who performed restock"
                }
              }
            },
            "description": "History of restocks"
          },
          "alertSettings": {
            "type": "object",
            "properties": {
              "alertThreshold": {
                "type": "integer",
                "minimum": 0,
                "description": "Critical stock level for immediate alerts",
                "example": 5,
                "default": 2
              },
              "lastAlertSent": {
                "type": "string",
                "format": "date-time",
                "description": "Timestamp of last alert sent"
              },
              "frequency": {
                "type": "string",
                "enum": ["immediate", "daily", "weekly", "monthly"],
                "description": "Alert frequency",
                "example": "daily",
                "default": "immediate"
              },
              "adminEmails": {
                "type": "array",
                "items": {
                  "type": "string",
                  "format": "email"
                },
                "description": "Admin emails to send alerts to",
                "example": ["admin@example.com"]
              }
            },
            "description": "Alert configuration"
          },
          "isActive": {
            "type": "boolean",
            "description": "Whether inventory tracking is active",
            "default": true
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "Inventory item creation timestamp"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time",
            "description": "Inventory item last update timestamp"
          }
        }
      },
      "InventoryReport": {
        "type": "object",
        "properties": {
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "description": "Report generation timestamp"
          },
          "summary": {
            "type": "object",
            "properties": {
              "totalItems": {
                "type": "integer",
                "description": "Total number of inventory items"
              },
              "lowStock": {
                "type": "integer",
                "description": "Number of items with low stock"
              },
              "criticalStock": {
                "type": "integer",
                "description": "Number of items with critical stock"
              },
              "outOfStock": {
                "type": "integer",
                "description": "Number of out-of-stock items"
              }
            }
          },
          "criticalStock": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/InventoryItem"
            },
            "description": "Items with critical stock levels"
          },
          "lowStock": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/InventoryItem"
            },
            "description": "Items with low stock levels"
          },
          "outOfStock": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/InventoryItem"
            },
            "description": "Out-of-stock items"
          },
          "allInventory": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/InventoryItem"
            },
            "description": "All inventory items"
          }
        }
      },
      "TrackingInfo": {
        "type": "object",
        "properties": {
          "orderNumber": {
            "type": "string",
            "description": "Order number",
            "example": "ORD-000001"
          },
          "status": {
            "type": "string",
            "enum": ["new", "preparing", "in_route", "delivered", "cancelled"],
            "description": "Current order status"
          },
          "paymentStatus": {
            "type": "string",
            "enum": ["pending", "paid", "failed", "refunded"],
            "description": "Payment status"
          },
          "timeline": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "description": "Timeline status"
                },
                "timestamp": {
                  "type": "string",
                  "format": "date-time",
                  "description": "Status timestamp"
                },
                "description": {
                  "type": "string",
                  "description": "Status description"
                },
                "icon": {
                  "type": "string",
                  "description": "Status icon",
                  "example": "📝"
                }
              }
            },
            "description": "Order timeline"
          },
          "estimatedDelivery": {
            "type": "string",
            "format": "date-time",
            "description": "Estimated delivery time"
          }
        }
      },
      "DashboardStats": {
        "type": "object",
        "properties": {
          "orders": {
            "type": "object",
            "properties": {
              "total": {
                "type": "integer",
                "description": "Total orders"
              },
              "pending": {
                "type": "integer",
                "description": "Pending orders"
              },
              "completed": {
                "type": "integer",
                "description": "Completed orders"
              },
              "cancelled": {
                "type": "integer",
                "description": "Cancelled orders"
              },
              "today": {
                "type": "integer",
                "description": "Orders today"
              }
            }
          },
          "revenue": {
            "type": "object",
            "properties": {
              "total": {
                "type": "number",
                "description": "Total revenue in NGN"
              },
              "today": {
                "type": "number",
                "description": "Revenue today in NGN"
              },
              "thisMonth": {
                "type": "number",
                "description": "Revenue this month in NGN"
              }
            }
          },
          "inventory": {
            "type": "object",
            "properties": {
              "totalItems": {
                "type": "integer",
                "description": "Total inventory items"
              },
              "lowStock": {
                "type": "integer",
                "description": "Items with low stock"
              },
              "criticalStock": {
                "type": "integer",
                "description": "Items with critical stock"
              },
              "outOfStock": {
                "type": "integer",
                "description": "Out-of-stock items"
              }
            }
          },
          "cocktails": {
            "type": "object",
            "properties": {
              "total": {
                "type": "integer",
                "description": "Total cocktails"
              },
              "active": {
                "type": "integer",
                "description": "Active cocktails"
              },
              "inactive": {
                "type": "integer",
                "description": "Inactive cocktails"
              }
            }
          }
        }
      }
    }
  },
  "tags": [
    {
      "name": "Authentication",
      "description": "Admin user authentication endpoints"
    },
    {
      "name": "Catalog",
      "description": "Cocktail catalog management. Public endpoints for browsing, admin endpoints for CRUD operations."
    },
    {
      "name": "Orders",
      "description": "Order management. Public endpoints for creating orders, admin endpoints for management."
    },
    {
      "name": "Payments",
      "description": "Payment processing with Paystack integration. Public endpoints for payment flow, admin endpoints for monitoring."
    },
    {
      "name": "Admin",
      "description": "Admin dashboard and management endpoints. Requires authentication."
    },
    {
      "name": "Order Tracking",
      "description": "Order tracking endpoints for customers to monitor their orders. Public endpoints."
    },
    {
      "name": "Email Validation",
      "description": "Email validation using Gmail SMTP with OTP verification. Public endpoints."
    },
    {
      "name": "Inventory Management",
      "description": "Inventory management with low stock alerts and email notifications. Admin only."
    }
  ]
}
